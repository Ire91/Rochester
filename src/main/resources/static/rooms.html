<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rooms & Rates - Rochester Hotel</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <nav class="navbar">
    <div class="navbar-container">
      <a href="#" class="navbar-logo" style="display:flex;align-items:center;gap:0.7rem;text-decoration:none;">
        <img src="images/logo.png" alt="Rochester Hotel Logo" style="height:40px;width:auto;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.07);background:#fff;">
        <span class="navbar-brand" style="font-weight:800;font-size:1.3rem;color:#004225;">Rochester Hotel</span>
      </a>
      <ul class="navbar-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="rooms.html">Rooms</a></li>
        <li><a href="index.html#bar">Bar & Dining</a></li>
        <li><a href="index.html#contact">Contact</a></li>
      </ul>
      <button class="theme-toggle" id="themeToggle" title="Toggle light/dark mode">ðŸŒ™</button>
      <button class="hamburger-menu" id="hamburgerMenu" title="Toggle navigation menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
  
  <!-- Mobile Navigation Overlay -->
  <div class="mobile-nav-overlay" id="mobileNavOverlay">
    <div class="mobile-nav-menu">
      <button class="mobile-nav-close" id="mobileNavClose">Ã—</button>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="rooms.html">Rooms</a></li>
        <li><a href="index.html#bar">Bar & Dining</a></li>
        <li><a href="index.html#contact">Contact</a></li>
      </ul>
      <div style="margin-top: 30px; text-align: center;">
        <button class="theme-toggle" id="mobileThemeToggle" title="Toggle light/dark mode">ðŸŒ™</button>
      </div>
    </div>
  </div>
  <header class="hero" style="min-height: 40vh;">
    <div class="hero-content">
      <h1>Rooms & Rates</h1>
      <p>Choose your perfect stay</p>
      <a href="index.html" class="btn">Back to Home</a>
    </div>
  </header>
  <main>
    <section class="section">
      <div class="room-list" id="roomList">
        <!-- Room cards will be loaded dynamically from API -->
        <div style="text-align: center; padding: 2rem;">
          <p>Loading rooms...</p>
        </div>
      </div>
    </section>
  </main>
  <footer>
    <div style="display:flex;align-items:center;gap:0.7rem;justify-content:center;margin-bottom:0.5rem;">
      <img src="images/logo.png" alt="Rochester Hotel Logo" style="height:32px;width:auto;border-radius:6px;box-shadow:0 1px 4px rgba(0,0,0,0.07);background:#fff;">
      <span style="font-weight:700;color:#004225;">Rochester Hotel</span>
    </div>
    <p>&copy; 2024 Rochester Hotel. All rights reserved.</p>
  </footer>
  <script src="script.js"></script>
  <script>
    // Theme toggle logic
    const themeToggle = document.getElementById('themeToggle');
    function setTheme(mode) {
      document.body.classList.toggle('dark-mode', mode === 'dark');
      themeToggle.textContent = mode === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
      localStorage.setItem('theme', mode);
    }
    themeToggle.onclick = function() {
      const isDark = document.body.classList.toggle('dark-mode');
      themeToggle.textContent = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    };
    // On load, set theme from localStorage
    (function() {
      const saved = localStorage.getItem('theme');
      if (saved === 'dark') setTheme('dark');
      else setTheme('light');
    })();
    
    // Hamburger menu functionality
    const hamburgerMenu = document.getElementById('hamburgerMenu');
    const mobileNavOverlay = document.getElementById('mobileNavOverlay');
    const mobileNavClose = document.getElementById('mobileNavClose');
    
    function openMobileNav() {
      hamburgerMenu.classList.add('active');
      mobileNavOverlay.style.display = 'block';
      setTimeout(() => {
        mobileNavOverlay.classList.add('active');
      }, 10);
      document.body.style.overflow = 'hidden';
    }
    
    function closeMobileNav() {
      hamburgerMenu.classList.remove('active');
      mobileNavOverlay.classList.remove('active');
      setTimeout(() => {
        mobileNavOverlay.style.display = 'none';
      }, 300);
      document.body.style.overflow = '';
    }
    
    hamburgerMenu.addEventListener('click', openMobileNav);
    mobileNavClose.addEventListener('click', closeMobileNav);
    
    // Close mobile nav when clicking overlay
    mobileNavOverlay.addEventListener('click', function(e) {
      if (e.target === mobileNavOverlay) {
        closeMobileNav();
      }
    });
    
    // Close mobile nav when clicking on a link
    const mobileNavLinks = mobileNavOverlay.querySelectorAll('a');
    mobileNavLinks.forEach(link => {
      link.addEventListener('click', closeMobileNav);
    });
    
    // Close mobile nav on escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && mobileNavOverlay.classList.contains('active')) {
        closeMobileNav();
      }
    });
    
    // Configuration
    const API_BASE_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1' 
      ? 'http://localhost:5050' 
      : window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');
    
    // Load rooms from API
    async function loadRooms() {
      try {
        const response = await fetch(`${API_BASE_URL}/api/rooms`);
        if (response.ok) {
          const rooms = await response.json();
          renderRooms(rooms);
        } else {
          console.error('Failed to load rooms');
          document.getElementById('roomList').innerHTML = '<p style="text-align: center; color: red;">Failed to load rooms</p>';
        }
      } catch (error) {
        console.error('Error loading rooms:', error);
        document.getElementById('roomList').innerHTML = '<p style="text-align: center; color: red;">Error loading rooms</p>';
      }
    }
    
    function renderRooms(rooms) {
      const roomList = document.getElementById('roomList');
      roomList.innerHTML = '';
      
      // Default images for different room types
      const defaultImages = {
        'Basic Room': 'https://images.unsplash.com/photo-1512918728675-ed5a9ecdebfd?auto=format&fit=crop&w=800&q=80',
        'Standard Room': 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80',
        'Deluxe Two Bedroom Apartment': 'https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=800&q=80'
      };
      
      rooms.forEach(room => {
        const roomCard = document.createElement('div');
        roomCard.className = 'room-card';
        
        // Use room's imageUrl if available, otherwise use default based on room type
        const imageUrl = room.imageUrl || defaultImages[room.roomType] || defaultImages['Basic Room'];
        
        roomCard.innerHTML = `
          <img src="${imageUrl}" alt="${room.roomType}" class="room-img">
          <h3>${room.roomType}</h3>
          <p>â‚¦${room.ratePerNight.toLocaleString()}/night</p>
          <p>${room.description || 'Comfortable accommodation with modern amenities.'}</p>
          <a href="booking.html?room=${encodeURIComponent(room.roomType)}" class="btn">Book Now</a>
        `;
        
        roomList.appendChild(roomCard);
      });
    }
    
    // Load rooms when page loads
    document.addEventListener('DOMContentLoaded', loadRooms);
  </script>
</body>
</html> 